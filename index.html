<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My RoThumbs - AI Roblox Thumbnail Generator</title>
  
  <!-- Step 1: Load Puter.js v2 library (required for puter.ai.txt2img) -->
  <script src="https://js.puter.com/v2/"></script>
  
  <!-- Google Fonts for nice look -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      color: #e0e0ff;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: rgba(20, 20, 50, 0.7);
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 0 40px rgba(0, 255, 255, 0.15);
      backdrop-filter: blur(8px);
    }
    h1 {
      text-align: center;
      color: #00ffff;
      font-weight: 700;
      text-shadow: 0 0 15px #00ffff80;
      margin-bottom: 10px;
    }
    .subtitle {
      text-align: center;
      color: #a0a0ff;
      margin-bottom: 30px;
    }
    textarea {
      width: 100%;
      height: 140px;
      padding: 16px;
      font-size: 16px;
      background: rgba(40, 40, 80, 0.8);
      color: white;
      border: 2px solid #4444ff;
      border-radius: 12px;
      resize: vertical;
      margin-bottom: 20px;
      box-shadow: inset 0 0 10px rgba(0, 0, 255, 0.2);
    }
    button {
      background: linear-gradient(90deg, #ff3366, #ff66cc);
      color: white;
      border: none;
      padding: 16px 40px;
      font-size: 20px;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      display: block;
      margin: 0 auto 30px;
      box-shadow: 0 0 25px rgba(255, 51, 102, 0.6);
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 40px rgba(255, 51, 102, 0.9);
    }
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    /* Loading spinner on button */
    button.loading {
      pointer-events: none;
    }
    button.loading::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 24px;
      height: 24px;
      border: 4px solid white;
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      transform: translate(-50%, -50%);
    }
    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
    #status {
      text-align: center;
      font-size: 18px;
      color: #ffff99;
      margin: 20px 0;
      min-height: 30px;
    }
    #result img {
      max-width: 100%;
      border-radius: 16px;
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.4);
      border: 2px solid rgba(0, 255, 255, 0.3);
      display: block;
      margin: 20px auto;
    }
    .tip {
      font-size: 14px;
      color: #aaaaff;
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>My RoThumbs AI</h1>
    <p class="subtitle">Generate epic Roblox thumbnails in seconds â€“ powered by FLUX.1-schnell</p>
    
    <textarea id="prompt" placeholder="Describe your Roblox thumbnail... e.g. epic battle avatar with sword, fire explosion background, text 'WIN OR DIE'"></textarea>
    
    <button id="generateBtn">Generate Thumbnail</button>
    
    <div id="status"></div>
    
    <div id="result"></div>
    
    <p class="tip">Tip: Be descriptive for best results! Right-click image to save.</p>
  </div>

  <script>
    const promptInput = document.getElementById('prompt');
    const generateBtn = document.getElementById('generateBtn');
    const status = document.getElementById('status');
    const resultDiv = document.getElementById('result');

    // Auto-focus prompt
    if (promptInput) promptInput.focus();

    generateBtn.addEventListener('click', async () => {
      const userPrompt = promptInput.value.trim();
      if (!userPrompt) {
        alert("Enter a description first!");
        return;
      }

      generateBtn.disabled = true;
      generateBtn.classList.add('loading'); // Show spinner
      status.textContent = "Generating... (Flux.1-schnell is working, 5-20 sec)";
      
      // Clear old image
      resultDiv.innerHTML = '';

      // Enhanced prompt for better Flux results
      const fullPrompt = `High-converting viral Roblox thumbnail in 2026 style, ${userPrompt}, dramatic cinematic lighting, intense dynamic Roblox avatar pose, glowing neon effects and particles, bold outlined glowing text overlay, explosive colorful background, ultra detailed, high contrast vibrant colors, trending YouTube clickbait composition, perfect 16:9 aspect ratio, professional GFX`;

      try {
        // Generate with Puter.js + FLUX.1-schnell
        const generatedImg = await puter.ai.txt2img(fullPrompt, {
          model: "black-forest-labs/FLUX.1-schnell"
        });

        // Customize image
        generatedImg.id = 'generated-img';
        generatedImg.alt = 'Generated Roblox Thumbnail';

        // Add to page
        resultDiv.appendChild(generatedImg);

        status.textContent = "Done! Right-click image to save ðŸ”¥";
      } catch (err) {
        status.textContent = "Error: " + (err.message || "Try again or check console (F12)");
        console.error("Generation error:", err);
      } finally {
        generateBtn.disabled = false;
        generateBtn.classList.remove('loading'); // Hide spinner
      }
    });
  </script>
</body>
</html>
